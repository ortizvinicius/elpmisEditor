!function(e,t){"use strict";var n=[],o={autoInit:!0,silentMode:!1,wysiwyg:!0,textMode:!0,keyListen:!0,types:["basic","header","blocks","lists","special","colors","hyperlink"],basic:["strong","em","mark","sup","sub","del","br"],header:["h1","h2","h3","h4","h5","h6"],blocks:["p","blockquote","pre"],lists:["ul","ol","dl"],special:["abbr","code","hr"],colors:"class",hyperlink:!0},s=function(){function e(e,n){var o=t[e];return n&&n.forEach(function(e,t){o=o.split("{{"+t+"}}").join(e)}),o}var t=["The element {{0}} is already been used. Use the destroy method before set it again.","Cannot add a customComponent to an element already started, set the autoInit option to false, add the customComponent then use init() or initAll(). You can look at the status property to check if the element was already started."];return function(t,n){this.name="ElpmisError",this.code=t,this.message=e(t,n),this.logError=function(){console.error(this.name+":",this.code,this.message)}}}(),i=function(){var e=1;return function(t,n){"object"==typeof t&&null!==t&&(this.name=t.name||"customComponent"+e,this.element=t.element||"span",this.class=t.class||"customClass"+e,this.type=n.indexOf(t.type)>-1?t.type:"special",e++)}}(),r=function(e,r){function l(e){if(g){if(!y.silentMode)throw new s(1);new s(1).logError()}else{e="object"==typeof e?e:{};var t=new i(e,y.types);t&&L.push(t)}}function a(e){e.addEventListener("keypress",function(t){var n=t.which||t.keyCode,o=t.shiftKey;y.blocks.indexOf("p")>-1&&(13!==n||o||(t.preventDefault(),c(e,{element:"p",newLineBefore:!0,inline:!1}))),y.basic.indexOf("br")>-1&&13===n&&o&&(t.preventDefault(),c(e,{element:"br",newLineAfter:!0,close:!1}))})}function c(e,t){if(e){t="object"==typeof t?t:{},t.element=t.element||"p",t.newLineBefore=!!t.hasOwnProperty("newLineBefore")&&t.newLineBefore,t.newLineAfter=!!t.hasOwnProperty("newLineAfter")&&t.newLineAfter,t.close=!t.hasOwnProperty("close")||t.close,t.inline=!t.hasOwnProperty("inline")||t.inline;var n=e.selectionStart,o=0,s=e.selectionEnd,i=e.value,r="";t.inline?(r=i.substring(0,n),r+=t.newLineBefore?"\n":"",r+="<"+t.element+">",r+=i.substring(n,s),t.newLineBefore&&(o=r.length),r+=t.close?"</"+t.element+">":"",r+=t.newLineAfter?"\n":"",t.newLineAfter&&(o=r.length),r+=i.substring(s)):(r=i,r+=t.newLineBefore?"\n":"",r+="<"+t.element+">",t.newLineBefore&&(o=r.length),r+=t.close?"</"+t.element+">":"",r+=t.newLineAfter?"\n":"",t.newLineAfter&&(o=r.length)),e.value=r,e.selectionStart=e.selectionEnd=o}}function f(e){g||(g=!0),y.keyListen&&a(e)}function u(){w.forEach(f)}function h(){n[p]=!1;var e=Object.keys(this);e.forEach(function(e){delete this[e]},this)}var p=e||".elpmis",m=p.substr(0,1),d=p.substr(1),y={},w=[],b=!1,L=[],g=!1;if("object"==typeof r&&null!==r?Object.keys(o).forEach(function(e){r.hasOwnProperty(e)?y[e]=r[e]:y[e]=o[e]}):y=o,!n[p]){switch(n[p]=!0,m){case"#":w[0]=t.getElementById(d);break;case".":b=t.getElementsByClassName(d);break;default:b=t.getElementsByTagName(p)}return b&&Array.prototype.forEach.call(b,function(e){w.push(e)}),y.autoInit&&u(),{status:g,selector:p,options:y,elements:w,customComponents:L,destroy:h,addCustomComponent:l,init:f,initAll:u,addHTMLElement:c}}if(!y.silentMode)throw new s(0,[p]);new s(0,[p]).logError()};e.ElpmisEditor=r}(window,document);